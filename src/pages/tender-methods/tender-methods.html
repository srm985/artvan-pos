<ion-header>
  <ion-navbar>
    <ion-title>Pre-Tender Methods
      <span *ngIf="storeTypeHeader?.length">({{storeTypeHeader}})</span>
    </ion-title>
    <ion-buttons start *ngIf="displayedInModal">
      <button ion-button (click)="dismiss()">Close</button>
    </ion-buttons>
    <ion-buttons end *ngIf="!displayedInModal">
      <button ion-button icon-only (click)="presentPopover($event)">
        <ion-icon name="color-wand"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content [ngClass]="{'hidden-footer':addingMethod}">
  <ion-grid>
    <form margin-bottom>
      <ion-row>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Cash:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="cash" [(ngModel)]="paymentMethods.cash" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Check:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="check" [(ngModel)]="paymentMethods.check" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Credit 1:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="credit_1" [(ngModel)]="paymentMethods.credit_1" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Credit 2:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="credit_2" [(ngModel)]="paymentMethods.credit_2" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Credit 3:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="credit_3" [(ngModel)]="paymentMethods.credit_3" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Credit 4:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="credit_4" [(ngModel)]="paymentMethods.credit_4" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Finance Amount:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="financeAmount" [(ngModel)]="paymentMethods.financeAmount" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Finance Company:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="financeCompany" [(ngModel)]="paymentMethods.financeCompany" type="tel" [readonly]="displayedInModal"></ion-input>
            <a class="anchor-precedence" *ngIf="!displayedInModal" item-end (click)="searchFinanceCompanies()">Search</a>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>SYNCB Amount:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="syncbAmount" [(ngModel)]="paymentMethods.syncbAmount" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>SYNCB Promo:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="syncbPromo" [(ngModel)]="paymentMethods.syncbPromo" type="search" [readonly]="displayedInModal"></ion-input>
            <a class="anchor-precedence" *ngIf="!displayedInModal" item-end (click)="searchPromos()">Search</a>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Tidewater Amount:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="tidewaterAmount" [(ngModel)]="paymentMethods.tidewaterAmount" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6 *ngIf="paymentMethods.tidewaterPromo">
          <ion-item>
            <ion-label>Tidewater Promo:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="tidewaterPromo" [(ngModel)]="paymentMethods.tidewaterPromo" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-12 col-md-6>
          <ion-item>
            <ion-label>Gift Card:</ion-label>
            <ion-input (ionBlur)="displayFooter()" (ionFocus)="hideFooterDuringInput()" (keyup)="methodChange()" name="giftCard" [(ngModel)]="paymentMethods.giftCard" type="tel" [readonly]="displayedInModal"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
    </form>
  </ion-grid>
</ion-content>
<ion-footer [ngClass]="{'hidden-footer':addingMethod}" *ngIf="!displayedInModal">
  <ion-toolbar padding>
    <ion-grid>
      <ion-row>
        <ion-col col-6 col-sm-8 col-md-9>
          <p>Subtotal:</p>
        </ion-col>
        <ion-col col-6 col-sm-4 col-md-3>
          <p>{{invoiceSubtotal | currency}}</p>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 col-sm-8 col-md-9>
          <p>Tax:</p>
        </ion-col>
        <ion-col col-6 col-sm-4 col-md-3>
          <p>{{invoiceTax | currency}}</p>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 col-sm-8 col-md-9>
          <p>Total Invoice:</p>
        </ion-col>
        <ion-col col-6 col-sm-4 col-md-3>
          <p>{{invoiceTotal | currency}}</p>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 col-sm-8 col-md-9>
          <p>Previously Paid:</p>
        </ion-col>
        <ion-col col-6 col-sm-4 col-md-3>
          <p>{{invoicePreviouslyPaid | currency}}</p>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 col-sm-8 col-md-9>
          <p>Invoice Balance:</p>
        </ion-col>
        <ion-col col-6 col-sm-4 col-md-3>
          <p>{{invoiceBalance | currency}}</p>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 col-sm-8 col-md-9>
          <p>Required Deposit:</p>
        </ion-col>
        <ion-col col-6 col-sm-4 col-md-3>
          <p>{{invoiceDeposit_calc | currency}}</p>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 col-sm-8 col-md-9>
          <p>COD Amount:</p>
        </ion-col>
        <ion-col col-6 col-sm-4 col-md-3>
          <p>{{invoiceCODAmount_calc | currency}}</p>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 col-sm-8 col-md-9>
          <p>Total Paid:</p>
        </ion-col>
        <ion-col col-6 col-sm-4 col-md-3>
          <p>{{invoiceTotalPaid_calc | currency}}</p>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 col-sm-8 col-md-9>
          <p>Balance Due:</p>
        </ion-col>
        <ion-col col-6 col-sm-4 col-md-3>
          <p>{{invoiceBalanceDue_calc | currency}}</p>
        </ion-col>
      </ion-row>
    </ion-grid>
    <button ion-button block margin-top (click)="submitOrder()" *ngIf="!displayedInModal">SUBMIT</button>
  </ion-toolbar>
</ion-footer>
